{"ast":null,"code":"export function cellColorClass(cellContent){switch(cellContent.toLowerCase()){case\"closed\":return\"status-closed\";case\"ready_for_review\":return\"status-ready-for-review\";default:return\"\";}}export function statusColor(cellContent){switch(cellContent.toLowerCase()){case\"closed\":return\"green\";case\"ready_for_review\":return\"blue\";case\"initiated\":return\"darkred\";default:return\"\";}}export function sortList(items,column_name,if_desc){const dir=if_desc?[-1,1]:[1,-1];let item_array=[];items.forEach(item=>{item_array.push({field:item[column_name],obj:item});});item_array.sort((a,b)=>a.field>b.field?dir[0]:b.field>a.field?dir[1]:0);let new_items=[];item_array.forEach(item=>new_items.push(item.obj));return new_items;}export function sort_array(array,field,if_desc){const dir=if_desc?[-1,1]:[1,-1];return array.sort((a,b)=>a[field]>b[field]?dir[0]:b[field]>a[field]?dir[1]:0);}export function shorten_url(name_string){if(name_string.length>23){return name_string.slice(0,20)+\"...\"+name_string.slice(-5);}else{return name_string;}}export function standardizeFontSize(BodyText){let newBodyText;const re=new RegExp(\"font-size:.*;\",\"g\");const re2=new RegExp(\"font-family:.*;\",\"g\");newBodyText=BodyText?BodyText.replaceAll(re,\"\"):\"\";newBodyText=BodyText?BodyText.replaceAll(re2,\"\"):\"\";return newBodyText;}export function apply_all_filters(items,filterSet,query){let filtered_items=items.filter(item=>checkItem(item,filterSet));if(query.length>0){filtered_items=filtered_items.filter(item=>Object.values(item).some(val=>String(val).toLowerCase().includes(query.toLowerCase())));}console.log(\"applying filters\");console.log(filtered_items);return filtered_items;}export function checkItem(item,filters){// return Object.entries(filters).every(([field, filter])=>checkObsOneFilter(filter, obs[field]))\nconsole.log(\"checking item \".concat(item.number));Object.keys(filters).forEach(field=>{console.log(field);console.log(filters[field].includes(item[field]));});console.log(Object.keys(filters).every(field=>filters[field].includes(item[field])));return Object.keys(filters).every(field=>filters[field].includes(item[field]));}export function format_date(date_string){const d=new Date(date_string);return d.toISOString().split(\"T\")[0];}export function openLink(url){const headers={'Authorization':\"Bearer #{procore_token['access_token']}\",'Procore-Company-Id':'562949953436954'};const request=new Request(url,{headers:headers});const newTab=window.open('','_blank');fetch(request).then(response=>response.text()).then(data=>{// Handle the response data\nnewTab.document.write(data);}).catch(error=>{// Handle any errors\nconsole.error('Error:',error);});}export async function updateIssue(project_id,obs_id,obs,attachments){console.log(\"Updating issue\");const formData=new FormData();formData.append(\"observation[project_id]\",project_id);formData.append(\"observation[observation]\",JSON.stringify(obs));attachments.forEach((file,index)=>{formData.append(\"observation[attachments[\".concat(index,\"]\"),file);});const url=\"/projects/\".concat(project_id,\"/obs/\").concat(obs_id);const csrfToken=getCookie('csrf_token');const resp=await fetch(url,{method:\"PATCH\",credentials:\"same-origin\",headers:{// 'Content-Type': 'multipart/form-data',\n\"X-CSRF-Token\":csrfToken},body:formData}).then(r=>r.json());return resp;}function getCookie(name){let cookieValue=null;if(document.cookie&&document.cookie!==''){const cookies=document.cookie.split(';');for(let i=0;i<cookies.length;i++){const cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}","map":{"version":3,"names":["cellColorClass","cellContent","toLowerCase","statusColor","sortList","items","column_name","if_desc","dir","item_array","forEach","item","push","field","obj","sort","a","b","new_items","sort_array","array","shorten_url","name_string","length","slice","standardizeFontSize","BodyText","newBodyText","re","RegExp","re2","replaceAll","apply_all_filters","filterSet","query","filtered_items","filter","checkItem","Object","values","some","val","String","includes","console","log","filters","concat","number","keys","every","format_date","date_string","d","Date","toISOString","split","openLink","url","headers","request","Request","newTab","window","open","fetch","then","response","text","data","document","write","catch","error","updateIssue","project_id","obs_id","obs","attachments","formData","FormData","append","JSON","stringify","file","index","csrfToken","getCookie","resp","method","credentials","body","r","json","name","cookieValue","cookie","cookies","i","trim","substring","decodeURIComponent"],"sources":["C:/Users/Phil Work/Documents/Coding Projects HD/ProcorePython/frontend/src/issues/Table/helpers.js"],"sourcesContent":["\r\nexport function cellColorClass(cellContent) {\r\n   switch (cellContent.toLowerCase()) {\r\n     case \"closed\":\r\n       return \"status-closed\";\r\n     case \"ready_for_review\":\r\n       return \"status-ready-for-review\";\r\n     default:\r\n       return \"\";\r\n   }\r\n }\r\n\r\n export function statusColor(cellContent) {\r\n  switch (cellContent.toLowerCase()) {\r\n    case \"closed\":\r\n      return \"green\";\r\n    case \"ready_for_review\":\r\n      return \"blue\";\r\n    case \"initiated\":\r\n      return \"darkred\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n\r\n export function sortList(items, column_name, if_desc) {\r\n   const dir = if_desc ? [-1, 1] : [1, -1];\r\n   let item_array = [];\r\n   items.forEach((item) => {\r\n     item_array.push({ field: item[column_name], obj: item });\r\n   });\r\n   item_array.sort((a, b) =>\r\n     a.field > b.field ? dir[0] : b.field > a.field ? dir[1] : 0\r\n   );\r\n   let new_items = [];\r\n   item_array.forEach((item) => new_items.push(item.obj));\r\n   return new_items;\r\n }\r\n\r\n export function sort_array(array, field, if_desc) {\r\n  const dir = if_desc ? [-1, 1] : [1, -1];\r\n  return array.sort((a, b) =>\r\n    a[field] > b[field] ? dir[0] : b[field] > a[field] ? dir[1] : 0\r\n  );\r\n}\r\n\r\nexport function shorten_url(name_string) {\r\n  if (name_string.length > 23) {\r\n    return name_string.slice(0, 20) + \"...\" + name_string.slice(-5);\r\n  } else {\r\n    return name_string;\r\n  }\r\n}\r\n\r\nexport function standardizeFontSize(BodyText) {\r\n  let newBodyText;\r\n  const re = new RegExp(\"font-size:.*;\", \"g\");\r\n  const re2 = new RegExp(\"font-family:.*;\", \"g\");\r\n  newBodyText = BodyText ? BodyText.replaceAll(re, \"\") : \"\";\r\n  newBodyText = BodyText ? BodyText.replaceAll(re2, \"\") : \"\";\r\n  return newBodyText\r\n}\r\n\r\nexport function apply_all_filters(items, filterSet, query) {\r\n  let filtered_items = items.filter((item) => checkItem(item, filterSet));\r\n  if (query.length > 0) {\r\n    filtered_items = filtered_items.filter((item) =>\r\n      Object.values(item).some((val) =>\r\n        String(val).toLowerCase().includes(query.toLowerCase())\r\n      )\r\n    );\r\n  }\r\n  console.log(\"applying filters\")\r\n  console.log(filtered_items)\r\n  return filtered_items\r\n}\r\n\r\nexport function checkItem(item, filters) {\r\n  // return Object.entries(filters).every(([field, filter])=>checkObsOneFilter(filter, obs[field]))\r\n  console.log(`checking item ${item.number}`);\r\n  Object.keys(filters).forEach((field) => {\r\n    console.log(field);\r\n    console.log(filters[field].includes(item[field]));\r\n  });\r\n  console.log(\r\n    Object.keys(filters).every((field) => filters[field].includes(item[field]))\r\n  );\r\n  return Object.keys(filters).every((field) =>\r\n    filters[field].includes(item[field])\r\n  );\r\n}\r\n\r\nexport function format_date(date_string) {\r\n  const d = new Date(date_string);\r\n  return d.toISOString().split(\"T\")[0];\r\n}\r\n\r\nexport function openLink(url) {\r\n  const headers = { 'Authorization' : \"Bearer #{procore_token['access_token']}\", 'Procore-Company-Id' : '562949953436954'  }\r\n  const request = new Request(url, { headers: headers });\r\n  const newTab = window.open('', '_blank');\r\n  fetch(request)\r\n  .then(response => response.text())\r\n  .then(data => {\r\n    // Handle the response data\r\n    newTab.document.write(data);\r\n  })\r\n  .catch(error => {\r\n    // Handle any errors\r\n    console.error('Error:', error);\r\n  });\r\n}\r\n\r\nexport async function updateIssue(project_id, obs_id, obs, attachments) {\r\n  console.log(\"Updating issue\");\r\n  const formData = new FormData();\r\n  formData.append(\"observation[project_id]\", project_id);\r\n  formData.append(\"observation[observation]\", JSON.stringify(obs));\r\n  attachments.forEach((file, index) => {\r\n    formData.append(`observation[attachments[${index}]`, file);\r\n  });\r\n\r\n  const url = `/projects/${project_id}/obs/${obs_id}`;\r\n  const csrfToken = getCookie('csrf_token');\r\n  const resp = await fetch(url, {\r\n    method: \"PATCH\",\r\n    credentials: \"same-origin\",\r\n    headers: {\r\n      // 'Content-Type': 'multipart/form-data',\r\n      \"X-CSRF-Token\": csrfToken,\r\n    },\r\n    body: formData,\r\n    }).then((r) => r.json());\r\n  \r\nreturn resp\r\n}\r\n\r\n\r\nfunction getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      const cookies = document.cookie.split(';');\r\n      for (let i = 0; i < cookies.length; i++) {\r\n          const cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}